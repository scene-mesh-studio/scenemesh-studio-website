---
title: "@scenemesh/entity-engine"
description: å…ƒæ•°æ®é©±åŠ¨çš„å®ä½“ä¸è§†å›¾è¿è¡Œå¼•æ“
---

# @scenemesh/entity-engine

> å…ƒæ•°æ®é©±åŠ¨çš„å®ä½“ä¸è§†å›¾è¿è¡Œå¼•æ“

Entity Engine æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å…ƒæ•°æ®é©±åŠ¨æ¡†æ¶ï¼Œä¸“ä¸ºå¿«é€Ÿæ„å»ºç°ä»£åŒ–ä¼ä¸šåº”ç”¨è€Œè®¾è®¡ã€‚é€šè¿‡ç»Ÿä¸€çš„å…ƒæ•°æ®é…ç½®ï¼Œè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æ•°æ®æ¨¡å‹ã€APIæ¥å£å’Œç”¨æˆ·ç•Œé¢ã€‚

## ğŸ¯ é€‚ç”¨åœºæ™¯

### âœ… é€‚ç”¨äº
- **ä¼ä¸šç®¡ç†ç³»ç»Ÿ** - CRMã€ERPã€å†…å®¹ç®¡ç†ç­‰
- **å¿«é€ŸåŸå‹å¼€å‘** - æ•°æ®é©±åŠ¨çš„åº”ç”¨å¿«é€ŸéªŒè¯
- **é…ç½®åŒ–åº”ç”¨** - éœ€è¦åŠ¨æ€æ¨¡å‹å®šä¹‰çš„ç³»ç»Ÿ
- **æ ‡å‡†CRUDåœºæ™¯** - å¤§é‡è¡¨å•å’Œåˆ—è¡¨æ“ä½œ

### âŒ ä¸é€‚ç”¨äº
- é«˜åº¦å®šåˆ¶åŒ–çš„UIäº¤äº’
- å®æ—¶æ€§è¦æ±‚æé«˜çš„åº”ç”¨
- å¤æ‚çš„æ•°æ®å¯è§†åŒ–ç³»ç»Ÿ

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### ä¸‰å±‚åˆ†ç¦»è®¾è®¡
```mermaid
graph TB
    A[Client Layer<br/>EntityViewContainer, Reactç»„ä»¶] --> B[Shared Layer<br/>Core Engine, Registryç³»ç»Ÿ]
    B --> C[Server Layer<br/>tRPC API, Prismaé›†æˆ]
```

- **Client Layer**: EntityViewContainerã€Reactç»„ä»¶
- **Shared Layer**: EntityEngineæ ¸å¿ƒã€Registryç³»ç»Ÿ
- **Server Layer**: tRPCè·¯ç”±ã€Prismaæ•°æ®è®¿é—®

## âš¡ 60ç§’å¿«é€Ÿä½“éªŒ

### 1. å®‰è£…ä¾èµ–
```bash
npm install @scenemesh/entity-engine
npm install @scenemesh/entity-engine-react
```

### 2. åˆå§‹åŒ–å¼•æ“
```typescript
import { EntityEngine } from '@scenemesh/entity-engine/server';

const engine = await EntityEngine.getInstance({
  // åˆå§‹åŒ–é…ç½®
});
```

### 3. åˆ›å»ºAPIè·¯ç”±
```typescript
// pages/api/trpc/[trpc].ts
import { appRouter } from '@scenemesh/entity-engine/server';
import { createNextApiHandler } from '@trpc/server/adapters/next';

export default createNextApiHandler({
  router: appRouter,
  // å…¶ä»–é…ç½®...
});
```

### 4. ä½¿ç”¨è§†å›¾å®¹å™¨
```tsx
import { EntityViewContainer } from '@scenemesh/entity-engine';

export default function ProductPage() {
  return (
    <EntityViewContainer 
      modelName="Product" 
      viewType="grid" 
      behavior={{ mode: 'display' }} 
    />
  );
}
```

## ğŸ”§ æ ¸å¿ƒç‰¹è‰²

### ğŸ¨ åŠ¨æ€æ¨¡å‹å®šä¹‰
åŸºäºIEntityModelæ¥å£çš„JSONé…ç½®ï¼Œæ”¯æŒå¤æ‚å­—æ®µç±»å‹å’Œå…³ç³»æ˜ å°„ï¼š

```typescript
const productModel: IEntityModel = {
  name: 'Product',
  title: 'äº§å“',
  fields: [
    {
      name: 'name',
      title: 'äº§å“åç§°',
      type: 'string',
      isRequired: true,
      searchable: true
    },
    {
      name: 'category',
      title: 'åˆ†ç±»',
      type: 'many_to_one',
      refModel: 'Category'
    }
  ]
};
```

### ğŸ§© æ¨¡å—åŒ–æ‰©å±•
é€šè¿‡IEntityModuleæ¥å£å®ç°åŠŸèƒ½æ¨¡å—çš„çƒ­æ’æ‹”ï¼š

```typescript
const customModule: IEntityModule = {
  info: { name: 'CustomModule', version: '1.0.0' },
  setupConfig: async (engine) => {
    // æ³¨å†Œæ¨¡å‹å’Œè§†å›¾
  },
  setupComponents: async (engine) => {
    // æ³¨å†ŒUIç»„ä»¶
  }
};
```

### ğŸ”„ ç»Ÿä¸€DataSource
TRPCEntityObjectDataSourceæä¾›ç»Ÿä¸€çš„æ•°æ®è®¿é—®æ¥å£ï¼š

```typescript
// è‡ªåŠ¨ç”Ÿæˆçš„APIç«¯ç‚¹
await dataSource.findObject({ id: '123', modelName: 'Product' });
await dataSource.listObjects({ modelName: 'Product', pagination: { page: 1 } });
await dataSource.createObject({ modelName: 'Product', values: { name: 'New Product' } });
```

### ğŸ›ï¸ å­—æ®µç±»å‹ç­–ç•¥
åŸºäºIModelFieldTyperçš„ç±»å‹ç³»ç»Ÿï¼Œæ”¯æŒè‡ªå®šä¹‰å­—æ®µè¡Œä¸ºï¼š

- **å†…ç½®ç±»å‹**: StringFieldTyperã€NumberFieldTyperã€DateFieldTyper
- **å…³ç³»ç±»å‹**: ManyToOneFieldTyperã€OneToManyFieldTyper
- **æ‰©å±•ç±»å‹**: è‡ªå®šä¹‰Typerå®ç°ç‰¹æ®Šä¸šåŠ¡é€»è¾‘

### ğŸ“Š å¯æ’æ§½è§†å›¾
æ”¯æŒå¤šç§å†…ç½®è§†å›¾ç±»å‹å’Œè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼š

- **FormView** - å•å¯¹è±¡ç¼–è¾‘è§†å›¾
- **GridView** - åˆ—è¡¨ç½‘æ ¼è§†å›¾  
- **KanbanView** - çœ‹æ¿ç®¡ç†è§†å›¾
- **DashboardView** - ä»ªè¡¨ç›˜è§†å›¾

## ğŸ†š ä¸ä¼ ç»Ÿæ–¹æ¡ˆå¯¹æ¯”

| ç‰¹æ€§ | Entity Engine | ä¼ ç»Ÿæ‰‹å†™CRUD | ä½ä»£ç å¹³å° |
|------|---------------|-------------|-----------|
| å¼€å‘æ•ˆç‡ | â­â­â­â­â­ | â­â­ | â­â­â­â­ |
| å®šåˆ¶çµæ´»æ€§ | â­â­â­â­ | â­â­â­â­â­ | â­â­ |
| ä»£ç å¯æ§æ€§ | â­â­â­â­â­ | â­â­â­â­â­ | â­â­ |
| å­¦ä¹ æˆæœ¬ | â­â­â­ | â­â­ | â­â­â­â­ |
| æ‰©å±•èƒ½åŠ› | â­â­â­â­â­ | â­â­â­â­ | â­â­ |

## ğŸŒŸ ç”Ÿæ€æ¨¡å—

### AI Module
æ™ºèƒ½åŒ–çš„å­—æ®µæ¨èå’Œæ•°æ®å¤„ç†èƒ½åŠ›

### Studio
å¯è§†åŒ–çš„æ¨¡å‹è®¾è®¡å’Œé…ç½®ç•Œé¢

### Additions
ä¸°å¯Œçš„ä¸šåŠ¡ç»„ä»¶å’Œæ‰©å±•æ¨¡å—

## ğŸš€ ä¸‹ä¸€æ­¥

ç«‹å³å¼€å§‹æ‚¨çš„Entity Engineä¹‹æ—…ï¼š

<div className="mt-6 flex gap-4">
  <a href="/entity-engine/getting-started" className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
    ğŸ“š å¿«é€Ÿå¼€å§‹
  </a>
  <a href="/entity-engine/concepts" className="bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600">
    ğŸ§  æ ¸å¿ƒæ¦‚å¿µ
  </a>
  <a href="/entity-engine/api-reference" className="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
    ğŸ“– API å‚è€ƒ
  </a>
</div>

---

[![npm version](https://badge.fury.io/js/%40scenemesh%2Fentity-engine.svg)](https://www.npmjs.com/package/@scenemesh/entity-engine)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[ğŸ’¡ è´¡çŒ®æŒ‡å—](https://github.com/scenemesh/entity-engine/blob/main/CONTRIBUTING.md) | [ğŸ› é—®é¢˜åé¦ˆ](https://github.com/scenemesh/entity-engine/issues)